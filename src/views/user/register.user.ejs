<%-layout('../layouts/blank.layout.ejs') %>
<link rel="stylesheet" href="/css/users/register.user.css">
    <form class="form" action="/user/register" method="post">
        <div class="form-parts">
            <div class="form-header">
                <img src="/images/logo.jpg" alt="Logo image" height="40" width="70">
                <h1>Đăng ký tài khoản</h1>
            </div>
            <div class="input-group">
                <input required type="text" name="username" autocomplete="off" class="input-group_input" id="username">
                <label class="input-group_lable">Tên đăng nhập</label>
                <i class="fa-solid fa-user icon"></i>
            </div>

            <div class="input-group">
                <input required type="email" name="email" autocomplete="off" class="input-group_input" id="email">
                <label class="input-group_lable">Email</label>
                <i class="fa-solid fa-envelope icon"></i>
            </div>
            <p id="notify-email" class="notify-email display-none">Nhập đúng định dạng email. VD: tranthecong@gmail.com</p>


            <div class="input-group">
                <input required type="password" name="password" autocomplete="off" class="input-group_input"
                    id="password">
                <label class="input-group_lable">Mật khẩu</label>
                <i class="fa-solid fa-eye-slash icon display-block" id="eyeSlash"></i>
                <i class="fa-solid fa-eye icon display-none" id="eye"></i>
            </div>

            <div class="input-group">
                <input required type="password"  autocomplete="off" class="input-group_input"
                    id="confirmPassword">
                <label class="input-group_lable">Xác thực mật khẩu</label>
            </div>

            <div class="input-group">
                <input required type="text" name="phone" autocomplete="off" class="input-group_input" id="phone">
                <label class="input-group_lable">Số điện thoại</label>
                <i class="fa-solid fa-phone icon"></i>
            </div>

            <div style="text-align: center;">
                <button class="form-control_button" type="submit" id="login">Đăng ký</button>
            </div>
        </div>

        <div class="form-parts">
            <img width="100%" height="100%" src="/images/register-vector.jpg" alt="vector image">
        </div>
    </form>

    <script>
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const email = document.getElementById('email');
        const login = document.getElementById('login');
        const notifyEmail = document.getElementById('notify-email');

        // show password
        const eyeSlash = document.getElementById('eyeSlash');
        const eye = document.getElementById('eye');
        eye.addEventListener('click', ()=>{
            // text => password
            eye.classList.replace('display-block', 'display-none');
            eyeSlash.classList.replace( 'display-none','display-block')
            passwordInput.type = 'password';
            confirmPasswordInput.type = 'password';
            passwordInput.focus();
        })
    
        eyeSlash.addEventListener('click', ()=>{
            // password => text
            eye.classList.replace( 'display-none','display-block')
            eyeSlash.classList.replace('display-block', 'display-none');
            passwordInput.type = 'text';
            passwordInput.focus();
            confirmPasswordInput.type = 'text';
        })

        login.addEventListener('click', (evt)=>{
            const passwordValue = passwordInput.value.trim();
            const confirmPasswordValue = confirmPasswordInput.value.trim();
            if(passwordValue !== confirmPasswordValue){
                evt.preventDefault();
                alert('Mật khẩu xác thực phải giống với mật khẩu');
                confirmPasswordInput.focus();
            }
        })

        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        email.addEventListener('blur', ()=>{
            const emailValue = email.value.trim();
            if(!re.test(emailValue)){
                notifyEmail.classList.replace('display-none', 'display-block');
                email.focus();
            }else{
                notifyEmail.classList.replace('display-block', 'display-none' );
            }
            
        })
        
    </script>